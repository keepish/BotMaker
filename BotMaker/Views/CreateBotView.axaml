<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             xmlns:vm="clr-namespace:BotMaker.ViewModels"
             x:Class="BotMaker.Views.CreateBotView"
             x:DataType="vm:CreateBotViewModel">
	<UserControl.DataContext>
		<vm:CreateBotViewModel/>
	</UserControl.DataContext>

	<ScrollViewer>
		<StackPanel Margin="10" Spacing="10">

			<TextBlock Text="Введите ваш Telegram user_id:"/>
			<TextBox Text="{Binding TelegramUserId, Mode=TwoWay}" Width="200"/>
			<Button Content="Как получить свой user__id?"
					Command="{Binding OpenUserIdInstructionCommand}"
					Background="Transparent" BorderThickness="0"
					Foreground="#0078D7" Cursor="Hand"
					HorizontalAlignment="Right"
					VerticalAlignment="Top"
					FontSize="10"/>

			<TextBlock Text="Название вашей компании:"/>
			<TextBox Text="{Binding CompanyName, Mode=TwoWay}" Width="300"/>

			<!-- FAQ -->
			<CheckBox Content="Добавить FAQ в бота?" IsChecked="{Binding AddFAQ}"/>
			<StackPanel Spacing="5" Margin="5" IsVisible="{Binding AddFAQ}">
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Вопрос:"/>
					<TextBox Width="200" Watermark="Вопрос" Text="{Binding Question, Mode=TwoWay}"/>
				</StackPanel>
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Ответ:"/>
					<TextBox Width="300" Watermark="Ответ" Text="{Binding Answer, Mode=TwoWay}"/>
				</StackPanel>
				<Button Content="Добавить вопрос-ответ" Command="{Binding AddFAQItemCommand}"/>
				<ItemsControl ItemsSource="{Binding FAQ}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Classes="card">
								<StackPanel>
									<StackPanel Margin="0,5,0,0">
										<TextBlock Text="{Binding Question, StringFormat='Вопрос: {0}'}"/>
										<TextBlock Text="{Binding Answer, StringFormat='Ответ: {0}'}" Margin="0,2,0,0"/>
										<Button Content="Удалить" Command="{Binding DataContext.RemoveFAQItemCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Margin="0,5,0,0"/>
									</StackPanel>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</StackPanel>

			<!-- Заказы -->
			<CheckBox Content="Будут ли ваши клиенты делать заказы?" IsChecked="{Binding ClientsCanMakeOrders}"/>
			<StackPanel Spacing="5" Margin="5" IsVisible="{Binding ClientsCanMakeOrders}">
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Название:"/>
					<TextBox Width="200" Watermark="Название услуги/товара" Text="{Binding Name, Mode=TwoWay}"/>
				</StackPanel>
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Описание:"/>
					<TextBox Width="200" Watermark="Описание услуги/товара" Text="{Binding Description, Mode=TwoWay}"/>
				</StackPanel>
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Стоимость:"/>
					<NumericUpDown Minimum="0" Maximum="99999999.99" Increment="0.01" Value="{Binding Price}" Width="200"/>
				</StackPanel>
				<Button Content="Добавить услугу/товар" Command="{Binding AddServiceCommand}" IsVisible="{Binding ClientsMakeOrders}"/>
				<ItemsControl ItemsSource="{Binding Services}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Classes="card" PointerEntered="OnPointerEnter" PointerExited="OnPointerLeave">
								<StackPanel>
									<StackPanel Name="CollapsedView" Orientation="Horizontal">
										<TextBlock Text="{Binding Name, StringFormat='Название: {0}'}" Width="200"/>
										<Button Content="Удалить" Command="{Binding DataContext.RemoveServiceCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Margin="10,0,0,0"/>
									</StackPanel>

									<StackPanel Name="ExpandedView" IsVisible="False" Margin="0,5,0,0">
										<TextBlock Text="{Binding Name, StringFormat='Название: {0}'}"/>
										<TextBlock Text="{Binding Description, StringFormat='Описание: {0}'}" Margin="0,2,0,0"/>
										<TextBlock Text="{Binding Price, StringFormat='Цена: {0}'}" Margin="0,2,0,0"/>
										<Button Content="Удалить" Command="{Binding DataContext.RemoveServiceCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Margin="0,5,0,0"/>
									</StackPanel>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</StackPanel>

			<!-- Остальные вопросы -->
			<CheckBox Content="Чат-бот ведет базу клиентов" IsChecked="{Binding BotKeepsClientBase}"/>
			<CheckBox Content="Отслеживать заказы в виде таблицы" IsChecked="{Binding TrackOrders}"/>
			<CheckBox Content="Добавить поиск и фильтрацию заказов" IsChecked="{Binding EnableSearchFilter}"/>
			<CheckBox Content="Добавить уведомления и напоминания" IsChecked="{Binding EnableNotifications}"/>

			<!-- Кнопка для генерации скрипта -->
			<Button Content="Сгенерировать функционал для бота" HorizontalAlignment="Center" Margin="10" Command="{Binding GenerateScriptCommand}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"/>

		</StackPanel>
	</ScrollViewer>
</UserControl>
